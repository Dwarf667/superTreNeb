<div class="row">
  <div class="col s12 l8">
    <div class="card-panel white">
        <table class="highlight centered" >
          <thead class="pink-text fixed">
          <tr class="borderDown">
            <th (click)="orderTableByColums('product');productAsc == false? productAsc=true:productAsc=false">Producto <i *ngIf="productAsc; else productDSC" class="right material-icons">arrow_drop_down</i>
              <ng-template #productDSC>
                <i class="right material-icons">arrow_drop_up</i>
              </ng-template>
            </th>
            <th (click)="orderTableByColums('quantity'); quantityAsc == false? quantityAsc=true:quantityAsc=false" >Cantidad <i *ngIf="quantityAsc; else imagenDSC" class="right material-icons" >arrow_drop_down</i>
              <ng-template #imagenDSC>
                <i class="right material-icons">arrow_drop_up</i>
              </ng-template>
            </th>


            <th (click)="orderTableByColums('finalPrice'); finalPriceAsc == false? finalPriceAsc=true:finalPriceAsc=false">Precio Final <i *ngIf="finalPriceAsc; else priceASC" class="right material-icons">arrow_drop_down</i>
              <ng-template #priceASC>
                <i class="right material-icons">arrow_drop_up</i>
              </ng-template>
            </th>
            <th>Imagen</th>
          </tr>
          </thead>
          <tbody>
            <tr class="heigthKeys" *ngFor="let item of shoppingList" (click)="changeRecordOfList(item)">
              <td>{{item.product}}</td>
              <td>{{item.quantity}}</td>
              <td>{{item.finalPrice}} €</td>
              <td>{{item.image}}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="col l4 s12">
      <div class="card-panel white neverScroll">
        <div class="row">
          <div class="col l12 s12 heigthPanelCalculator black pink-text">
            <div class="row">
              <div class="left">Pagado:</div>
              <div class="right">{{payMoney}} €</div>
            </div>
            <div class="divider"></div>
            <div class="row">
              <div class="left">Devolución:</div>
              <div class="right">{{returnPay}} €</div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col l12 s12">
            <div class="row">
              <div class="col s3 valign-wrapper heigthKeys pink-text blue-grey lighten-5" (click)="calculateActions('7')" >
                <p class="col s12 center"><b>7</b></p>
              </div>
              <div class="col s3 valign-wrapper heigthKeys pink-text blue-grey lighten-5" (click)="calculateActions('8')">
                <p class="col s12 center"><b>8</b></p>
              </div>
              <div class="col s3 valign-wrapper heigthKeys pink-text blue-grey lighten-5" (click)="calculateActions('9')">
                <p class="col s12 center"><b>9</b></p>
              </div>
              <div class="col s3 valign-wrapper heigthKeys pink-text blue-grey lighten-5" (click)="calculateActions('+')">
                <i class="material-icons col s12 center">add</i>
              </div>
              <div class="col s3 valign-wrapper heigthKeys pink-text blue-grey lighten-5" (click)="calculateActions('4')">
                <p class="col s12 center"><b>4</b></p>
              </div>
              <div class="col s3 valign-wrapper heigthKeys pink-text blue-grey lighten-5" (click)="calculateActions('5')">
                <p class="col s12 center"><b>5</b></p>
              </div>
              <div class="col s3 valign-wrapper heigthKeys pink-text blue-grey lighten-5" (click)="calculateActions('6')">
                <p class="col s12 center"><b>6</b></p>
              </div>
              <div class="col s3 valign-wrapper heigthKeys pink-text blue-grey lighten-5" (click)="calculateActions('-')">
                <i class="material-icons col s12 center">remove</i>
              </div>
              <div class="col s3 valign-wrapper heigthKeys pink-text blue-grey lighten-5" (click)="calculateActions('1')">
                <p class="col s12 center"><b>1</b></p>
              </div>
              <div class="col s3 valign-wrapper heigthKeys pink-text blue-grey lighten-5" (click)="calculateActions('2')">
                <p class="col s12 center"><b>2</b></p>
              </div>
              <div class="col s3 valign-wrapper heigthKeys pink-text blue-grey lighten-5" (click)="calculateActions('3')">
                <p class="col s12 center"><b>3</b></p>
              </div>
              <div class="col s3 valign-wrapper heigthKeys pink-text blue-grey lighten-5" (click)="calculateActions('*')">
                <i class="material-icons col s12 center">close</i>
              </div>
              <div class="col s3 valign-wrapper heigthKeys pink-text blue-grey lighten-5" (click)="calculateActions('Backspace')">
                <i class="material-icons col s12 center">arrow_back</i>
              </div>
              <div class="col s3 valign-wrapper heigthKeys pink-text blue-grey lighten-5" (click)="calculateActions('0')">
                <p class="col s12 center"><b>0</b></p>
              </div>
              <div class="col s3 valign-wrapper heigthKeys pink-text blue-grey lighten-5" (click)="calculateActions(',')">
                <p class="col s12 center"><b>,</b></p>
              </div>
              <div class="col s3 valign-wrapper heigthKeys pink-text blue-grey lighten-5" (click)="calculateActions('Enter')">
                <i class="material-icons col s12 center">keyboard_return</i>
              </div>
              <div class="col s3 valign-wrapper heigthKeys pink-text blue-grey lighten-5">
                <p class="col s12 center">imagen</p>
              </div>
              <div class="col s3 valign-wrapper heigthKeys pink-text blue-grey lighten-5">
                <p class="col s12 center">imagen</p>
              </div>
              <div class="col s3 valign-wrapper heigthKeys pink-text blue-grey lighten-5">
                <p class="col s12 center">imagen</p>
              </div>
              <div class="col s3 valign-wrapper heigthKeys pink-text blue-grey lighten-5">
                <p class="col s12 center">imagen</p>
              </div>
              <div class="col s3 valign-wrapper heigthKeys pink-text blue-grey lighten-5">
                <p class="col s12 center">imagen</p>
              </div>
              <div class="col s3 valign-wrapper heigthKeys pink-text blue-grey lighten-5">
                <p class="col s12 center">imagen</p>
              </div>
              <div class="col s3 valign-wrapper heigthKeys pink-text blue-grey lighten-5">
                <p class="col s12 center">imagen</p>
              </div>
              <div class="col s3 valign-wrapper heigthKeys pink-text blue-grey lighten-5">
                <p class="col s12 center">imagen</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
</div>

<div class="row">
  <div class="col l8 s12">
    <div class="card-panel white heigthPanelTotal neverScroll">
      <div class="left pink-text">
        TOTAL:
      </div>
      <div class="right sizeText">
        {{totalItemPrice}} <i class="material-icons pink-text">euro_symbol</i>
      </div>
    </div>
  </div>
  <div class="col l4 s12 center ">
    <button class="btn col s12 light-blue darken-4 waves-effect waves-light" (click)="openBoxMoney()">{{OPEN_BOX_REGISTER}}</button>
    <br>
    <br>
    <button class="btn col s12 light-blue darken-4 waves-effect waves-light modal-trigger" (click)="addProductName=''; addProductPrice=''; addProductQuantity=1; " data-target="addProducts">{{ADD_PRODUCT}}</button>
    <br>
    <br>
    <button class="btn col s12 waves-effect waves-light modal-trigger" data-target="payAndFinish">{{PAY_FINISH}}</button>
  </div>
</div>


<!-- Modal Trigger -->


<!-- Modal Structure -->
<div id="addProducts" class="modal">
  <div class="modal-content">
    <div class="row">

      <!--Inicio tabss Materializzer-->
      <div class="col s12">
        <ul class="tabs tabs-fixed-width">
          <li class="tab col s6"><a class="active" href="#addProduct">{{INCLUDE_PRODUCT}}</a></li>
          <li class="tab col s6"><a  href="#searchProductForList">{{SEARCH_PRODUCT}}</a></li>
        </ul>
      </div>
      <!--fin materialize tabs-->
      <!--inicio plantillas primera-->
      <div id="addProduct" class="col s12 center">
        <div class="row center">
          <div class="input-field col s6 ">
            <input id="product" type="text" [(ngModel)]="addProductName" class="validate">
            <label class="active" for="product">Producto</label>
          </div>
        </div>
        <div class="row center">
          <div class="input-field col s6">
            <input id="price" type="text" [(ngModel)]="addProductPrice" class="validate">
            <label class="active" for="price">Precio</label>
          </div>
        </div>
        <div class="row center">
          <div class="input-field col s6">
            <input id="quantity" type="text" [(ngModel)]="addProductQuantity" class="validate">
            <label class="active" for="price">Cantidad</label>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s6">

          </div>
        </div>
      </div>
      <!--fin plantilla primera-->
      <!--inicio plantilla segunda-->
      <div id="searchProductForList" class="col s12 center">
        <div class="row">
          <div class="input-field col s6">
            <input id="searchProduct" type="text" class="validate" >
            <label class="active" for="searchProduct">Buscar Producto</label>
          </div>
        </div>
      </div>
      <!--fin plantilla segunda-->
    </div>
  </div>
  <div class="modal-footer">
    <button  class="btn modal-action modal-close waves-effect waves-green btn-flat">Cancelar</button>
    <button (click)="addProductToList()"  class="btn modal-action modal-close waves-effect waves-green btn-flat">Añadir</button>

  </div>
</div>

<div id="payAndFinish" class="modal">
  <div class="modal-content">

    <div [hidden]="payMoney > totalItemPrice">
      La cantidad de dinero introduccido es menor al precio total
    </div>
    ¿Imprimir ticket?
  </div>

  <div class="modal-footer">
    <button  class="btn modal-action modal-close waves-effect waves-green btn-flat">Cancelar</button>
    <button  class="btn modal-action modal-close waves-effect waves-green btn-flat" (click)="shoppingList=[]; totalItemPrice=0; payMoney=0; returnPay=0">No</button>
    <button  class="btn modal-action modal-close waves-effect waves-green btn-flat" (click)="printTickets(); shoppingList=[]; totalItemPrice=0; payMoney=0; returnPay=0">Si</button>
  </div>
</div>

<div class="widthTicket" id="ticket" [hidden]="true">
  <p class="widthItemTicket" *ngFor="let items of shoppingList">
  {{items.product}}
  {{items.finalPrice}}
  </p>
  <p class="widthItemTicket">
    Total: {{totalItemPrice}}
  </p>

</div>

<div  [hidden]="true" id="openBox">
  27,112,0,100,200
  <1B>p<00>
  <1B><70><00>
  ESC,p,0,100,200
</div>
